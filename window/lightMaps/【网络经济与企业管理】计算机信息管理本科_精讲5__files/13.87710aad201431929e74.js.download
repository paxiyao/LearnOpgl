(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{799:function(t,n,e){"use strict";e.r(n),e.d(n,"default",function(){return w});e(84);var a=e(15),o=e(52),s=e.n(o),i=e(53),r=e.n(i),c=e(54),u=e.n(c),l=e(55),p=e.n(l),d=e(56),h=e.n(d),f=e(0),m=e.n(f),g=e(2),D=e.n(g),S=e(22),_=e(795),v=5e3,j=2,w=function(t){function n(){var t;return s()(this,n),(t=u()(this,p()(n).call(this))).componentDidMount=function(){t.initChat()},t.componentWillUnmount=function(){var n=t.props.chat;n&&n.dispose()},t.getSLEmoji=function(){return t.props.chat?t.props.chat.getSLEmoji():{}},t.initChat=function(){var n=t.props.chat;n.loadAllMessages(function(n){if(0===n.result&&n.message_list&&n.message_list.length>0){var e=n.message_list.reduce(function(t,n){var e=n.message_type,a=n.message_content,o=n.message_id,s=n.user_name,i=n.message_ts,r=n.user_identity;return e!==j&&t.push({msgData:a,recordId:o,name:s,timestamp:i,userIdentity:r}),t},[]);t.setState({chatData:e})}},function(t){a.a.error("获取聊天历史记录失败！")}),n.loadRoomAnnounce(function(n){0===n.result&&n.announce&&t.setState({announceData:n})},function(t){a.a.error("获取公告失败！")})},t.handleMetaDataUpdate=Object(S.f)(function(n){return t.chatPanel.updateScrollTop(n)},v),t.handleVideoSeeked=function(n){t.chatPanel.updateScrollTop(n,!0)},t.state={chatData:[],announceData:null},t}return h()(n,t),r()(n,[{key:"render",value:function(){var t=this,n=this.state.announceData;return m.a.createElement(_.default,{ref:function(n){t.chatPanel=n},emoji:this.getSLEmoji(),chatData:this.state.chatData,forbiddenStatus:1,readOnly:!0,announceData:n})}}]),n}(f.Component);w.propTypes={chat:D.a.object.isRequired}}}]);
//# sourceMappingURL=13.87710aad201431929e74.js.map