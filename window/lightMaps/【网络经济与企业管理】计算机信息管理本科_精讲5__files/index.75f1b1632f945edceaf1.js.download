!function(e){function t(t){for(var n,r,i=t[0],s=t[1],u=t[2],l=0,p=[];l<i.length;l++)r=i[l],c[r]&&p.push(c[r][0]),c[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(d&&d(t);p.length;)p.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var s=a[r];0!==c[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={4:0},c={4:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{1:1,2:1,3:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1}[e]&&t.push(r[e]=new Promise(function(t,a){for(var n=({}[e]||e)+"."+{0:"31d6cfe0d16ae931b73c",1:"2e482f0ad0fcfeef930d",2:"edaf79317bf70ebea77c",3:"d9f217f0907ab6bd2b12",6:"975ae2fd6739e9792e79",7:"1fd62b5506067c23644b",8:"a063bfb0350c682c4fdc",9:"a0174794082cace529c3",10:"ff677dc21c32247d0708",11:"c8c1f455bb608dea04de",12:"0b18f51e3d11a3d3a732",13:"31d6cfe0d16ae931b73c"}[e]+".css",c=i.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=(d=o[s]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===n||u===c))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){var d;if((u=(d=l[s]).getAttribute("data-href"))===n||u===c)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.request=n,delete r[e],p.parentNode.removeChild(p),a(o)},p.href=c,document.getElementsByTagName("head")[0].appendChild(p)}).then(function(){r[e]=0}));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise(function(t,n){a=c[e]=[t,n]});t.push(a[2]=n);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({}[e]||e)+"."+{0:"7ff8e778ea62d2576c25",1:"fb360d93f56b153cf417",2:"4a48e9fb4822f45b8856",3:"0c0c330cd0d30c947731",6:"07e1ff113c5bba26f519",7:"73bffd3ef499cad6180a",8:"26ca710c46b12d4c073f",9:"53ffd1b97804798bf3f4",10:"87c99b29960e155048ef",11:"0422fd5f5aef26848715",12:"a78bfe0647282b34d430",13:"87710aad201431929e74"}[e]+".js"}(e),o=function(t){s.onerror=s.onload=null,clearTimeout(u);var a=c[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+n+": "+r+")");o.type=n,o.request=r,a[1](o)}c[e]=void 0}};var u=setTimeout(function(){o({type:"timeout",target:s})},12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./assets/",i.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=u;o.push([319,5]),a()}({148:function(e,t,a){"use strict";var n,r,c,o=a(0),i=a.n(o),s=a(2),u=a.n(s),l=a(34),d=a(52),p=a.n(d),f=a(53),_=a.n(f),T=a(54),E=a.n(T),m=a(55),b=a.n(m),y=a(56),v=a.n(y),S=a(6),h=a(208),O=a(291),x=a.n(O),A=Object(l.c)(null,function(e){return{handleSwitchWindow:function(){e({type:S.a.SWITCH_WINDOW})}}})((c=r=function(e){function t(){var e,a;p()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=E()(this,(e=b()(t)).call.apply(e,[this].concat(r)))).handleBtnClick=function(){a.props.handleSwitchWindow()},a}return v()(t,e),_()(t,[{key:"render",value:function(){var e=this.handleBtnClick;return i.a.createElement(h.a,{title:"切换窗口",icon:x.a,onClick:e})}}]),t}(o.Component),r.propTypes={handleSwitchWindow:u.a.func.isRequired},n=c))||n,k=Object(o.lazy)(function(){return Promise.all([a.e(0),a.e(3),a.e(7),a.e(8)]).then(a.bind(null,801))}),g=Object(o.lazy)(function(){return Promise.all([a.e(0),a.e(3),a.e(10)]).then(a.bind(null,800))}),P=Object(o.lazy)(function(){return Promise.all([a.e(0),a.e(9)]).then(a.bind(null,798))}),D=Object(o.lazy)(function(){return Promise.all([a.e(6),a.e(11)]).then(a.bind(null,802))}),j=a(292),I=a.n(j);function U(e){var t=e.videoLoaded;return i.a.createElement("ul",{className:I.a["button-panel"]},i.a.createElement(o.Suspense,{fallback:null},t&&i.a.createElement(P,null),t&&i.a.createElement(g,null),t&&i.a.createElement(k,null),i.a.createElement(A,null),t&&i.a.createElement(D,null)))}U.propTypes={videoLoaded:u.a.bool},U.defaultProps={videoLoaded:!1};t.a=Object(l.c)(function(e){var t=e["live-page"].liveRoom,a=e["vod-page"].replayRoom,n=e.common.teachUnitId;return{videoLoaded:Boolean((t||a)&&n)}})(U)},149:function(e,t){e.exports=SLIVE},153:function(e,t,a){e.exports={"button-item":"index__button-item___E74ix","button-item__icon":"index__button-item__icon___y8Zvn","button-item__text":"index__button-item__text___3_Nax"}},196:function(e,t,a){"use strict";a.r(t);var n=a(473),r=n.keys().filter(function(e){return"./index.js"!==e}).reduce(function(e,t){return e[t.match(/([^\/]+)\.js$/)[1]]=n(t).default,e},{});t.default=r},197:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return u});var n=a(4),r=a.n(n),c=a(1),o=r.a.mark(u),i=a(497),s=i.keys().filter(function(e){return"./index.js"!==e});function u(){var e,t,a,n,u,l=arguments;return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for(e=l.length,t=new Array(e),a=0;a<e;a++)t[a]=l[a];n=0;case 2:if(!(n<s.length)){o.next=13;break}o.t0=r.a.keys(i(s[n]).default);case 4:if((o.t1=o.t0()).done){o.next=10;break}return u=o.t1.value,o.next=8,c.c.apply(void 0,[i(s[n]).default[u]].concat(t));case 8:o.next=4;break;case 10:n+=1,o.next=2;break;case 13:case"end":return o.stop()}},o)}},20:function(e,t,a){"use strict";t.a={UPDATE_STATE:"evaluate/UPDATE_STATE",GET_EVALUATE_HISTORY:"evaluate/GET_EVALUATE_HISTORY",CHANGE_RATE:"evaluate/CHANGE_RATE",STAR_HOVER:"evaluate/STAR_HOVER",SELECT_LABEL:"evaluate/SELECT_LABEL",CHANGE_INPUT_VALUE:"evaluate/CHANGE_INPUT_VALUE",SUBMIT:"evaluate/SUBMIT",BTN_CLICKED:"evaluate/BTN_CLICKED",AUTO_SHOW_MODAL:"evaluate/AUTO_SHOW_MODAL"}},201:function(e,t,a){"use strict";a.r(t);var n=a(263),r=a.n(n);a.d(t,"SmileOutline",function(){return r.a});var c=a(264),o=a.n(c);a.d(t,"MehOutline",function(){return o.a});var i=a(265),s=a.n(i);a.d(t,"ExclamationCircleOutline",function(){return s.a});var u=a(266),l=a.n(u);a.d(t,"StarFill",function(){return l.a});var d=a(267),p=a.n(d);a.d(t,"CloseCircleFill",function(){return p.a});var f=a(268),_=a.n(f);a.d(t,"CheckCircleFill",function(){return _.a});var T=a(269),E=a.n(T);a.d(t,"InfoCircleFill",function(){return E.a});var m=a(270),b=a.n(m);a.d(t,"CloseOutline",function(){return b.a});var y=a(271),v=a.n(y);a.d(t,"LoadingOutline",function(){return v.a})},203:function(e,t,a){e.exports={wrap:"index__wrap___1tvKR",box:"index__box___3_tsS"}},208:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(2),o=a.n(c),i=a(153),s=a.n(i);function u(e){var t=e.title,a=e.icon,n=e.onClick;return r.a.createElement("li",{className:s.a["button-item"],onClick:n},r.a.createElement("div",{className:s.a["button-item__icon"]},r.a.createElement("img",{src:a,alt:""})),r.a.createElement("p",{className:s.a["button-item__text"]},t))}u.propTypes={title:o.a.string,icon:o.a.string.isRequired,onClick:o.a.func.isRequired},u.defaultProps={title:""},t.a=u},21:function(e,t,a){"use strict";t.a={UPDATE_STATE:"live-page/update-state",INIT:"live-page/init",DISPOSE:"live-page/DISPOSE",SWITCH_WINDOW:"live-page/SWITCH_WINDOW",LIVE_LOGGED:"live-page/LIVE_LOGGED"}},22:function(e,t,a){"use strict";a.d(t,"f",function(){return c}),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return i}),a.d(t,"e",function(){return s}),a.d(t,"c",function(){return u}),a.d(t,"d",function(){return l});var n=a(95),r=a.n(n);function c(e,t){var a,n,r=this;return function(){for(var c=arguments.length,o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];var s=r,u=Date.now();n&&u-n<t?(clearTimeout(a),a=setTimeout(function(){e.apply(s,o),n=u},t)):(e.apply(s,o),n=u)}}function o(e,t,a){var n,r=this;return function(){for(var c=arguments.length,o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];var s=r;if(n&&clearTimeout(n),a){var u=!n;n=setTimeout(function(){n=null},t),u&&e.apply(s,o)}else n=setTimeout(function(){e.apply(s,o)},t)}}function i(e,t){var a=e.className.split(/\s+/);a.push(t),e.className=a.join(" ")}function s(e,t){var a=e.className.split(/\s+/);e.className=a.filter(function(e){return e!==t}).join(" ")}function u(e){return new Promise(function(t){setTimeout(t,e)})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.indexOf("?"),a={};t>-1&&e.split("?")[1].split("&").forEach(function(e){var t=e.split("="),n=r()(t,2),c=n[0],o=n[1];a[c]=decodeURIComponent(o)});return a}},25:function(e,t,a){"use strict";t.a={UPDATE_STATE:"vod-page/update-state",INIT:"vod-page/init",DISPOSE:"vod-page/DISPOSE",SWITCH_WINDOW:"vod-page/SWITCH_WINDOW",PLAY_BACK_RATE:{1:"replay_click_onespeed",1.25:"replay_click_one_point_two_speed",1.5:"replay_click_one_point_five_speed",2:"replay_click_two_speed"}}},27:function(e,t,a){"use strict";t.a={UPDATE_STATE:"chat/update-state",UPDATE_CHAT_MESSAGE:"chat/update-chat-message",LOADING_REPLY:"chat/LOADING_REPLY",UPDATE_RADIO_LIST:"chat/UPDATE_RADIO_LIST",START_COUNTDOWN:"chat/START_COUNTDOWN"}},284:function(e,t,a){e.exports=a.p+"5d13e2294d8b1dd5fc4c788f92ee8002.swf"},285:function(e,t,a){e.exports={main:"Main__main___3ptDi"}},291:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAADwMZRfAAAAAXNSR0IArs4c6QAAAlNJREFUOBF9Uk1IVFEUPue9ZyZINLkp29RCnGVgMFMRBE5aLVoEWWAtGnTERBcFNUNEQeRMAzEwzRiFPxC1KKFFO7NFm5iBFoKb3pAQimkbmxam4tz3TufevNNVybO553zfd8/PvQdgB3NzkV73Set8KRvp3kEGaJLu0Jlm9CsXfMLDSHCMWYeIgkqDMIFgRYP9kwvmHemrJCzEUr7tFpH/AAhqFIHA8OYigFh2bDjXdP1D0UxkycDNnX5Mvp/SCSS2LcFfMCA8PC9d06wvQ20t3M6ACXIszFj7iPDSCTgpGaei4Y5kNJSWPrrZyAsCuioDZQizjmPdFRWwAamTW4owvmzZdldz3/vXUjN2/9TuH3NrC8zttWznuMNTH+ExqubYeLmpd1LN/DXXPi3Au1i3y84e6plY1KLF2bU7PHBAxj55fdxJ6wrnqNOC4P59tdgxvq7jreezWKxmSUz/5C7qJccjzsuHXaoKEZahHDD6qjJVJ9BYlv+mEiiQsEGO85HHuSIB3oMM9jyv6BuZ2MkDq0IMcLU3iZHClMRn5r63aH7jnHFsG/OeR528Er9q6w8OakG6K3xpVVSGVVWCo8lo+JWFxFLeJdOQptSy8XqngfAzb+N4tv/snt8r5Tz5pLrbpEcQvD+OxhDQA5tCKokG5Zm8FhrkR0mY2P98tDCTGCneUBtrivjf3yGvt4lJn6v9e3BEwQni8eHCzQ1uqxzgUfREo0dilJl2JSJ0OYsghAIX+GaR9fb26KeSvrltHE3Ik1e72ye4x+0+jI8Vn5qc6f8BqSvXMH7ONiEAAAAASUVORK5CYII="},292:function(e,t,a){e.exports={"button-panel":"index__button-panel___3c7W6"}},319:function(e,t,a){e.exports=a(581)},32:function(e,t,a){"use strict";var n=a(280),r=a.n(n),c=a(200),o=a.n(c),i={timeout:3e4,withCredentials:!0,paramsSerializer:function(e){return o.a.stringify(e,{arrayFormat:"brackets"})}},s=r.a.create(i);s.interceptors.request.use(function(e){return"post"!==e.method.toLowerCase()||e.headers["Content-Type"]||(e.data=o.a.stringify(e.data)),e}),s.interceptors.response.use(function(e){var t=e.data,a=(t=void 0===t?{}:t).rs,n=t.error,r=t.rsdesp,c=t.resultMessage,o=void 0===c?{}:c,i=t.errorMessage,s=void 0===i?"":i,u=t.errorCode;if(void 0!==a){if(n)return 0===a?e.data:Promise.reject(n);if(1===a)return o;if(0===a)return 403==+u?Promise.reject(new Error("被踢出人员")):Promise.reject(s||r)}return e},function(e){var t=e.message,a=e.response;if(a){if(a.status>=500)return a.data&&a.data.message?Promise.reject(a.data.message):Promise.reject(e);if(401===a.status)return a.data&&a.data.code,Promise.reject(e);var n=a.data,r=(n=void 0===n?{}:n).message;return Promise.reject(r||t)}return Promise.reject(t)}),t.a=s},35:function(e,t,a){"use strict";t.a={GET_TOKEN:"/player-war/player/token",POST_QUERYQUIZPAPERLIST:"/player-war/tiku/homework/queryQuizPaperList",POST_QUERYPAPERCONTENT:"/player-war/tiku/homework/queryPaperContent",POST_QUERYHOMEWORKRESULT:"/player-war/tiku/homework/queryHomeworkResult",GET_GETANALYSISANDSTUANSWER:"/player-war/tiku/homework/getAnalysisAndStuAnswer",POST_SUBMITHOMEWORK:"/player-war/tiku/homework/submitHomework",GET_SCORE_LABEL_LIST:"/player-war/comment/getScoreLabelList",GET_SCORE_RECORD:"/player-war/comment/getScoreRecord",GET_ATTACHMENT_LIST:"/player-war/attachment/getAttachmentList",ADD_CORE_RECORD:"/player-war/comment/addScoreRecord",FEED_BACK_TYPE_LIST:"/player-war/comment/getOptionList",FEED_BACK:"/player-war/comment/submitOption"}},38:function(e,t,a){e.exports={main:"VodPage__main___1wUdm",left:"VodPage__left___1Kp0k",right:"VodPage__right___qBMsa",transition:"VodPage__transition___OzoyT",sunl_board_placeholder:"VodPage__sunl_board_placeholder___2rF3p",sunl_player_placeholder:"VodPage__sunl_player_placeholder___3iUd8",main_player:"VodPage__main_player___3HG0w",small_player:"VodPage__small_player___1nVwq",chat:"VodPage__chat___1hLx2",inactive:"VodPage__inactive___1L886",btns:"VodPage__btns___v-q1J",questions:"VodPage__questions___1STRZ"}},42:function(e,t,a){"use strict";t.a={UPDATE_STATE:"feedback/update",RESET:"feedback/reset",GET_TYPELIST:"feedback/get_typelist",SUBMIT:"feedback/submit",BTN_CLICKED:"feedback/BTN_CLICKED"}},473:function(e,t,a){var n={"./chat.js":474,"./common.js":475,"./course.js":476,"./evaluate.js":477,"./feedback.js":492,"./index.js":196,"./live-page.js":493,"./question.js":494,"./quiz.js":495,"./vod-page.js":496};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=473},474:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return u});var n=a(9),r=a.n(n),c=a(11),o=a.n(c),i=a(73),s=a(27),u={iUserCount:1,chatData:[],announceData:null,forbiddenStatus:0,forbiddenStatusSingle:0,connectStatus:0,userIdentity:1,userToken:"",portrait:"",countdownNumber:0};t.default=Object(i.a)(r()({},s.a.UPDATE_STATE,function(e,t){var a=t.payload;return o()({},e,a)}),u)},475:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return l});var n,r=a(9),c=a.n(r),o=a(11),i=a.n(o),s=a(73),u=a(6),l={ctk:"",loading:!0,imToken:"",liveToken:"",liveRoomId:"",invitation:"",encryptStr:"",channelCode:"",teachUnitId:"",isLive:!0,isKicked:!1,userId:0};t.default=Object(s.a)((n={},c()(n,u.a.UPDATE_STATE,function(e,t){var a=t.payload;return i()({},e,a)}),c()(n,u.a.KICK_OUT,function(e){return i()({},e,{isKicked:!0})}),n),l)},476:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return u});var n=a(9),r=a.n(n),c=a(11),o=a.n(c),i=a(73),s=a(63),u={courseList:[],popVisible:!1,popTip:"",visible:!1};t.default=Object(i.a)(r()({},s.a.UPDATE_STATE,function(e,t){var a=t.payload;return o()({},e,a)}),u)},477:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return p});var n,r=a(9),c=a.n(r),o=a(81),i=a.n(o),s=a(11),u=a.n(s),l=a(73),d=a(20),p={star:0,indexArr:[],inputValue:"",renderType:"",showTip:!1,rateDisabled:!1,labelList:[],scoreRecord:{},prompt:"无",loading:!1,starStyleValue:0,visible:!1};t.default=Object(l.a)((n={},c()(n,d.a.UPDATE_STATE,function(e,t){var a=t.payload;return u()({},e,a)}),c()(n,d.a.STAR_HOVER,function(e,t){var a=t.payload.value;return a===e.star||void 0===a?e:u()({},e,{starStyleValue:a})}),c()(n,d.a.SELECT_LABEL,function(e,t){var a=t.payload.item,n=e.indexArr,r=e.rateDisabled,c=e.scoreRecord;return!i()(c)||r?u()({},e,{showTip:!1}):(n.find(function(e){return e.id===a.id})?n.splice(n.findIndex(function(e){return e.id===a.id}),1):n.push(a),u()({},e,{indexArr:n,showTip:!1}))}),c()(n,d.a.CHANGE_INPUT_VALUE,function(e,t){var a=t.payload.value;return a.length>100?u()({},e,{prompt:"输入文字已到最大长度",showTip:!0}):u()({},e,{inputValue:a,showTip:!1})}),n),p)},492:function(e,t,a){"use strict";a.r(t);var n,r=a(9),c=a.n(r),o=a(11),i=a.n(o),s=a(73),u=a(42),l={feedbackVisible:!1,type:[],successVisible:!1,loading:!1};t.default=Object(s.a)((n={},c()(n,u.a.UPDATE_STATE,function(e,t){var a=t.payload;return i()({},e,a)}),c()(n,u.a.RESET,function(e){return i()({},e,l)}),n),{feedbackVisible:!1,typeList:[],type:[],successVisible:!1,loading:!1})},493:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return l});var n,r=a(9),c=a.n(r),o=a(11),i=a.n(o),s=a(73),u=a(21),l={isDisPlaySmall:!0,isPlayerSmall:!0,paperId:0,isFullScreen:!1,debug:!1,sketchpad:null,camera:null,chat:null,liveRoom:null,endTime:0};t.default=Object(s.a)((n={},c()(n,u.a.UPDATE_STATE,function(e,t){var a=t.payload;return i()({},e,a)}),c()(n,u.a.LIVE_LOGGED,function(e,t){var a=t.payload;return i()({},e,a)}),n),l)},494:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return u});var n=a(9),r=a.n(n),c=a(11),o=a.n(c),i=a(73),s=a(64),u={textNum:0,qaData:[]};t.default=Object(i.a)(r()({},s.a.UPDATE_STATE,function(e,t){var a=t.payload;return o()({},e,a)}),u)},495:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return l});var n,r=a(9),c=a.n(r),o=a(11),i=a.n(o),s=a(73),u=a(7),l={loading:!1,quizPapers:[],curIndex:0,checkModal:!1,checkLoading:!1,scoreRecord:{totalScore:0,studentAnswerInfo:[]},scoreLoading:!1,resultMap:{},questionIds:[],answerValueMap:{},answerMap:{},type:"list",visible:!1,popTip:u.a.TIPS.unstart,popVisible:!1,currentPaperId:0,_time:0,uncompletedPapers:[]};t.default=Object(s.a)((n={},c()(n,u.a.UPDATE_STATE,function(e,t){var a=t.payload;return i()({},e,a)}),c()(n,u.a.UPDATE_PAPER_LIST,function(e,t){var a=t.payload.quizPapers,n=a.reduce(function(e,t){var a=t.quizzesPaperStatusCode,n=t.paperId;return"UNCOMPLETE"===a&&e.push(n),e},[]);return i()({},e,{quizPapers:a,uncompletedPapers:n})}),c()(n,u.a.SET_CURRENT_QUESTION,function(e,t){var a=t.payload.questionId,n=e.questionIds.indexOf(a),r=n>-1?n:0;return i()({},e,{curIndex:r,type:"content",status:!0})}),n),l)},496:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return u});var n=a(9),r=a.n(n),c=a(11),o=a.n(c),i=a(73),s=a(25),u={paperId:0,debug:!1,sketchpad:null,camera:null,canPlay:!1,isFullScreen:!1,isDisPlaySmall:!0,isPlayerSmall:!0,replayRoom:null,chat:null};t.default=Object(i.a)(r()({},s.a.UPDATE_STATE,function(e,t){var a=t.payload;return o()({},e,a)}),u)},497:function(e,t,a){var n={"./chat.js":498,"./common.js":582,"./course.js":556,"./evaluate.js":557,"./feedback.js":558,"./index.js":197,"./live-page.js":559,"./question.js":560,"./quiz.js":561,"./vod-page.js":563};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=497},498:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),c=a(1),o=a(82),i=a.n(o),s=a(27),u=a(6),l=a(22),d=r.a.mark(T),p=r.a.mark(E),f=r.a.mark(m),_=r.a.mark(b);function T(){var e,t,a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(c.f)([s.a.UPDATE_CHAT_MESSAGE,s.a.LOADING_REPLY,s.a.UPDATE_RADIO_LIST]);case 3:return e=n.sent,t=e.payload,a=e.meta,n.next=8,Object(c.d)({type:s.a.UPDATE_STATE,payload:t});case 8:i()(a)&&a(),n.next=0;break;case 11:case"end":return n.stop()}},d)}function E(){var e,t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(c.e)(function(e){return e.chat.chatData.length});case 3:return e=a.sent,a.next=6,Object(c.a)(l.c,6e4);case 6:return a.next=8,Object(c.e)(function(e){return e.chat.chatData.length});case 8:return t=a.sent,a.next=11,Object(c.d)({type:u.a.SEND_SLOG,payload:{eid:"im_count_per_minute",opts:{count:t-e}}});case 11:a.next=0;break;case 13:case"end":return a.stop()}},p)}function m(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=2;case 1:if(!(e>=0)){t.next=9;break}return t.next=4,Object(c.d)({type:s.a.UPDATE_STATE,payload:{countdownNumber:e}});case 4:return t.next=6,Object(c.a)(l.c,1e3);case 6:e-=1,t.next=1;break;case 9:case"end":return t.stop()}},f)}function b(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(c.f)(s.a.START_COUNTDOWN);case 3:if(!e){t.next=6;break}return t.next=6,Object(c.b)(e);case 6:return t.next=8,Object(c.c)(m);case 8:e=t.sent,t.next=0;break;case 11:case"end":return t.stop()}},_)}t.default={updateMessages:T,slogImCount:E,countdownSaga:b}},556:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),c=(a(84),a(15)),o=a(154),i=a.n(o),s=a(1),u=a(22),l=a(63),d=a(7),p=a(20),f=a(32),_=a(35),T=r.a.mark(b),E=r.a.mark(y),m=r.a.mark(v);function b(){var e,t,a,n;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(s.f)(l.a.FETCH_LIST);case 3:return r.next=5,Object(s.e)(function(e){return e});case 5:if(e=r.sent,t=e.common,a=t.teachUnitId,!t.isKicked){r.next=11;break}return r.abrupt("continue",0);case 11:return r.prev=11,r.next=14,Object(s.a)(f.a.get,_.a.GET_ATTACHMENT_LIST,{params:{teachUnitId:a}});case 14:if(n=r.sent,!i()(n)){r.next=20;break}return r.next=18,Object(s.d)({type:l.a.UPDATE_STATE,payload:{courseList:n}});case 18:r.next=21;break;case 20:throw new Error("获取课件列表失败");case 21:r.next=27;break;case 23:return r.prev=23,r.t0=r.catch(11),r.next=27,Object(s.a)(c.a.error,"获取课件列表失败");case 27:r.next=0;break;case 29:case"end":return r.stop()}},T,null,[[11,23]])}function y(){var e,t,a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(s.f)(l.a.BTN_CLICKED);case 3:return n.next=5,Object(s.e)(function(e){return e});case 5:if(e=n.sent,t=e.course.courseList,a=e.common.isKicked,!t.length||a){n.next=13;break}return n.next=11,Object(s.d)({type:l.a.UPDATE_STATE,payload:{visible:!0}});case 11:n.next=19;break;case 13:return n.next=15,Object(s.d)({type:l.a.UPDATE_STATE,payload:{popTip:"没有课件",popVisible:!0}});case 15:return n.next=17,Object(s.a)(u.c,3e3);case 17:return n.next=19,Object(s.d)({type:l.a.UPDATE_STATE,payload:{popVisible:!1}});case 19:n.next=0;break;case 21:case"end":return n.stop()}},E)}function v(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(s.f)([d.a.RECEIVE_QUIZ,p.a.AUTO_SHOW_MODAL]);case 3:return e.next=5,Object(s.d)({type:l.a.UPDATE_STATE,payload:{visible:!1}});case 5:e.next=0;break;case 7:case"end":return e.stop()}},m)}t.default={fetchList:b,btnClicked:y,receiveQuiz:v}},557:function(e,t,a){"use strict";a.r(t);var n=a(81),r=a.n(n),c=a(4),o=a.n(c),i=(a(84),a(15)),s=a(1),u=a(20),l=a(32),d=a(22),p=a(35),f=a(6),_=a(7),T=a(21),E=o.a.mark(h),m=o.a.mark(O),b=o.a.mark(x),y=o.a.mark(A),v=o.a.mark(k),S=o.a.mark(g);function h(){var e,t,a,n;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(s.f)(u.a.GET_EVALUATE_HISTORY);case 3:return r.next=5,Object(s.e)(function(e){return e});case 5:if(e=r.sent,t=e.common,a=t.teachUnitId,!t.isKicked){r.next=11;break}return r.abrupt("continue",0);case 11:return r.next=13,Object(s.d)({type:u.a.UPDATE_STATE,payload:{loading:!0}});case 13:return r.prev=13,r.next=16,Object(s.a)(l.a.get,p.a.GET_SCORE_RECORD,{params:{teachUnitId:a}});case 16:return n=r.sent,r.next=19,Object(s.d)({type:u.a.UPDATE_STATE,payload:{scoreRecord:n.score?n:{},starStyleValue:n.score||0}});case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(13),i.a.error("获取评价记录失败");case 24:return r.next=26,Object(s.d)({type:u.a.UPDATE_STATE,payload:{loading:!1}});case 26:r.next=0;break;case 28:case"end":return r.stop()}},E,null,[[13,21]])}function O(){var e,t,a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(s.f)(u.a.CHANGE_RATE);case 3:return e=n.sent,t=e.payload.value,n.prev=5,n.next=8,Object(s.a)(l.a.get,p.a.GET_SCORE_LABEL_LIST,{params:{score:t}});case 8:return a=n.sent,n.next=11,Object(s.d)({type:u.a.UPDATE_STATE,payload:{labelList:a||[],star:t,indexArr:[],renderType:"form",showTip:!1,starStyleValue:t}});case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(5),n.next=17,Object(s.a)(i.a.error,"评分失败");case 17:n.next=0;break;case 19:case"end":return n.stop()}},m,null,[[5,13]])}function x(){var e,t,a,n,r,c,d;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(s.f)(u.a.SUBMIT);case 3:return o.next=5,Object(s.e)(function(e){return e});case 5:if(e=o.sent,t=e.common.teachUnitId,a=e.evaluate,n=a.inputValue,r=a.indexArr,c=a.star,!n.trim().length&&!r.length){o.next=36;break}return o.next=14,Object(s.d)({type:u.a.UPDATE_STATE,payload:{loading:!0}});case 14:return d=JSON.stringify(r.map(function(e){return e.id})),o.prev=15,o.next=18,Object(s.a)(l.a.get,p.a.ADD_CORE_RECORD,{params:{teachUnitId:t,labels:d,score:c,feedback:n.trim(),scoreTypeCode:"PC"}});case 18:return o.next=20,Object(s.d)({type:u.a.UPDATE_STATE,payload:{renderType:"submit",rateDisabled:!0,labelList:r,loading:!1}});case 20:return o.next=22,Object(s.a)(i.a.success,"评价提交成功");case 22:return o.next=24,Object(s.d)({type:f.a.SEND_SLOG,payload:{eid:"submit_rate_success"}});case 24:o.next=32;break;case 26:return o.prev=26,o.t0=o.catch(15),o.next=30,Object(s.a)(i.a.error,"评价提交失败");case 30:return o.next=32,Object(s.d)({type:f.a.SEND_SLOG,payload:{eid:"submit_rate_failure",opts:{reason:"".concat(o.t0)}}});case 32:return o.next=34,Object(s.d)({type:u.a.UPDATE_STATE,payload:{loading:!1}});case 34:o.next=38;break;case 36:return o.next=38,Object(s.d)({type:u.a.UPDATE_STATE,payload:{showTip:!0,prompt:"请选择标签或输入其它评价意见"}});case 38:o.next=0;break;case 40:case"end":return o.stop()}},b,null,[[15,26]])}function A(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(s.f)(_.a.RECEIVE_QUIZ);case 3:return e.next=5,Object(s.d)({type:u.a.UPDATE_STATE,payload:{visible:!1,labelList:[],renderType:""}});case 5:e.next=0;break;case 7:case"end":return e.stop()}},y)}function k(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(s.f)(u.a.BTN_CLICKED);case 3:return t.next=5,Object(s.e)(function(e){return e});case 5:if(e=t.sent,!e.common.isKicked){t.next=11;break}return t.next=10,Object(s.a)(i.a.info,"直播尚未开始");case 10:return t.abrupt("continue",0);case 11:return t.next=13,Object(s.d)({type:u.a.UPDATE_STATE,payload:{visible:!0}});case 13:t.next=0;break;case 15:case"end":return t.stop()}},v)}function g(){var e,t,a,n,c,i,l,p,f,_,E;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(s.f)(T.a.LIVE_LOGGED);case 2:if(e=o.sent,t=e.payload.endTime,!(1e3*t-Date.now()<18e5)){o.next=7;break}return o.abrupt("return");case 7:return o.next=10,Object(s.a)(d.c,2e4);case 10:return o.next=12,Object(s.e)(function(e){return e});case 12:if(a=o.sent,n=a["live-page"].endTime,c=a.quiz.visible,i=a.evaluate,l=i.scoreRecord,p=i.rateDisabled,f=a.common,_=f.isLive,E=f.isKicked,r()(l)&&!p&&_&&!E){o.next=23;break}return o.abrupt("break",34);case 23:if(!(1e3*n-Date.now()<18e5)){o.next=32;break}if(!c){o.next=27;break}return o.abrupt("break",34);case 27:return o.next=29,Object(s.d)({type:u.a.AUTO_SHOW_MODAL});case 29:return o.next=31,Object(s.d)({type:u.a.UPDATE_STATE,payload:{visible:!0}});case 31:return o.abrupt("break",34);case 32:o.next=7;break;case 34:case"end":return o.stop()}},S)}t.default={getEvaluateHistory:h,changeRate:O,submit:x,receiveQuiz:A,btnClicked:k,autoShowModal:g}},558:function(e,t,a){"use strict";a.r(t);a(84);var n=a(15),r=a(4),c=a.n(r),o=a(1),i=a(42),s=a(7),u=a(20),l=a(32),d=a(35),p=c.a.mark(b),f=c.a.mark(y),_=c.a.mark(v),T=c.a.mark(S),E=c.a.mark(h),m=c.a.mark(O);function b(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(o.f)([s.a.RECEIVE_QUIZ,u.a.AUTO_SHOW_MODAL]);case 3:return e.next=5,Object(o.d)({type:i.a.RESET});case 5:e.next=0;break;case 7:case"end":return e.stop()}},p)}function y(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.a)(l.a.get,d.a.FEED_BACK_TYPE_LIST);case 3:return e=t.sent,t.next=6,Object(o.d)({type:i.a.UPDATE_STATE,payload:{typeList:e}});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n.a.error("拉取反馈失败：".concat(t.t0));case 11:case"end":return t.stop()}},f,null,[[0,8]])}function v(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(o.f)(i.a.GET_TYPELIST);case 3:return t.next=5,Object(o.e)(function(e){return e});case 5:if(e=t.sent,!e.common.isKicked){t.next=9;break}return t.abrupt("continue",0);case 9:return t.next=11,Object(o.a)(y);case 11:t.next=0;break;case 13:case"end":return t.stop()}},_)}function S(){var e,t,a,r,s,u,p;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(o.e)(function(e){return e});case 3:return e=c.sent,t=e.common,a=t.ctk,r=t.isLive,s=t.userId,u=t.teachUnitId,p=e.feedback.type,c.next=12,Object(o.a)(l.a.post,d.a.FEED_BACK,{optionIds:p.toString(),teachUnitId:u,userId:s,token:a,isLive:Number(r),userAgent:navigator.userAgent});case 12:return c.next=14,Object(o.d)({type:i.a.UPDATE_STATE,payload:{feedbackVisible:!1,successVisible:!0,type:[]}});case 14:c.next=19;break;case 16:c.prev=16,c.t0=c.catch(0),n.a.error("反馈失败：".concat(c.t0||"请重试..."));case 19:case"end":return c.stop()}},T,null,[[0,16]])}function h(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(o.f)(i.a.SUBMIT);case 3:return e.next=5,Object(o.d)({type:i.a.UPDATE_STATE,payload:{loading:!0}});case 5:return e.next=7,Object(o.a)(S);case 7:return e.next=9,Object(o.d)({type:i.a.UPDATE_STATE,payload:{loading:!1}});case 9:e.next=0;break;case 11:case"end":return e.stop()}},E)}function O(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(o.f)(i.a.BTN_CLICKED);case 3:return t.next=5,Object(o.e)(function(e){return e});case 5:if(e=t.sent,!e.common.isKicked){t.next=11;break}return t.next=10,Object(o.a)(n.a.info,"直播尚未开始");case 10:return t.abrupt("continue",0);case 11:return t.next=13,Object(o.d)({type:i.a.UPDATE_STATE,payload:{feedbackVisible:!0}});case 13:t.next=0;break;case 15:case"end":return t.stop()}},m)}t.default={receiveQuizSaga:b,getTypeListSaga:v,submitSaga:h,btnClicked:O}},559:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),c=(a(84),a(15)),o=a(1),i=a(81),s=a.n(i),u=a(149),l=a(21),d=a(27),p=a(6),f=a(7),_=a(284),T=a.n(_),E=a(22),m=r.a.mark(v),b=r.a.mark(S),y=r.a.mark(h);function v(e){var t,a,n,i,_,b,y,v,S,h,O;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(o.f)(l.a.INIT);case 3:return t=r.sent,a=t.payload,n=a.boardRef,i=a.playerRef,r.next=9,Object(o.e)(function(e){return e});case 9:if(_=r.sent,b=_.common,y=b.ctk,v=b.debug,!(S=b.token)){r.next=29;break}return h={liveToken:S,userToken:y,sketchpad:{el:n,ready:function(t){e.dispatch({type:l.a.UPDATE_STATE,payload:{sketchpad:t}})}},camera:{swfPath:T.a,el:i,onFullScreen:function(){e.dispatch({type:l.a.UPDATE_STATE,payload:{isFullScreen:!0}});var t=document.getElementById("app"),a=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;return a&&a.call(t),Object(E.a)(t,"fullscreen"),e.dispatch({type:p.a.SEND_SLOG,payload:{eid:"live_click_fullscreen"}}),!0},onExitFullScreen:function(){e.dispatch({type:l.a.UPDATE_STATE,payload:{isFullScreen:!1}});var t=document.getElementById("app"),a=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,n=document.exitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;return a&&n&&n.call(document),Object(E.e)(t,"fullscreen"),e.dispatch({type:l.a.UPDATE_STATE,payload:{isDisPlaySmall:!0}}),e.dispatch({type:p.a.SEND_SLOG,payload:{eid:"live_click_quitfullscreen"}}),!0},ready:function(t){e.dispatch({type:l.a.UPDATE_STATE,payload:{camera:t}})}},chat:{ready:function(t){e.dispatch({type:l.a.UPDATE_STATE,payload:{chat:t}})}},debug:v},O=new u.Live(h),r.next=19,Object(o.d)({type:l.a.UPDATE_STATE,payload:{liveRoom:O}});case 19:O.on("live:login",function(t){var a=t.roomInfo,n=(a=void 0===a?{}:a).sName,r=a.iUserCount,c=a.iImId,o=a.lEndTime,i=t.iUserId,u=void 0===i?0:i,f=t.sUserName,_=void 0===f?"":f;e.dispatch({type:l.a.LIVE_LOGGED,payload:{endTime:o}}),e.dispatch({type:p.a.UPDATE_STATE,payload:{userId:u}}),document.title=n||"尚直播",e.dispatch({type:p.a.SEND_SLOG,payload:{eid:"live_enter_page"}}),e.dispatch({type:p.a.SEND_SLOG,payload:{eid:"user_info",opts:{courseType:"live",client:"pc-web"}}}),e.dispatch({type:d.a.UPDATE_STATE,payload:{iUserCount:r}}),0==+c&&s()(c)&&e.dispatch({type:p.a.SEND_SLOG,payload:{eid:"im_id_eq_0",opts:{url:window.location.href,sname:n,username:_}}})}),O.on("live:video_type_change",function(t){e.dispatch({type:l.a.SWITCH_WINDOW,payload:{type:t}})}),O.on("live:heartbeat",function(t){var a=t.iUserCount;e.dispatch({type:d.a.UPDATE_STATE,payload:{iUserCount:a}})}),O.on("live:begin_paper",function(t){var a=t.iPaperId;e.dispatch({type:f.a.RECEIVE_QUIZ,payload:{paperId:a}}),e.dispatch({type:p.a.SEND_SLOG,payload:{eid:"received_quiz_message",opts:{paperId:a}}})}),O.on("live:error",function(e){var t=e.iCode;c.a.error("直播登录错误，错误码".concat(t))}),O.on("camera:volume_change",Object(E.b)(function(){var t=e.getState()["live-page"].isFullScreen?"live_click_sound_fs":"live_click_sound";e.dispatch({type:p.a.SEND_SLOG,payload:{eid:t}})},2e3)),O.on("camera:time_update",Object(E.f)(function(){e.dispatch({type:p.a.SEND_SLOG,payload:{eid:"live_keep_watch"}})},6e4)),O.on("camera:switch_button_click",function(t){var a=e.getState()["live-page"].isFullScreen;e.dispatch({type:l.a.UPDATE_STATE,payload:{isDisPlaySmall:t}}),a&&e.dispatch({type:p.a.SEND_SLOG,payload:{eid:t?"live_open_smallwindow_fs":"live_ close_smallwindow_fs"}})}),r.next=30;break;case 29:c.a.error("缺少token，无法初始化直播。");case 30:r.next=0;break;case 32:case"end":return r.stop()}},m)}function S(){var e,t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(o.f)(l.a.DISPOSE);case 3:return a.next=5,Object(o.e)(function(e){return e["live-page"]});case 5:return e=a.sent,(t=e.liveRoom)&&t.dispose(),a.next=10,Object(o.d)({type:l.a.UPDATE_STATE,payload:{liveRoom:null}});case 10:return a.next=12,Object(o.d)({type:p.a.SEND_SLOG,payload:{eid:"live_quit_page"}});case 12:a.next=0;break;case 14:case"end":return a.stop()}},b)}function h(){var e,t,a,n,c,i,s;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(o.f)(l.a.SWITCH_WINDOW);case 3:return e=r.sent,t=e.payload,a=(t=void 0===t?{}:t).type,r.next=9,Object(o.e)(function(e){return e["live-page"]});case 9:if(n=r.sent,c=n.camera,i=n.sketchpad,s=n.isPlayerSmall,1===a!==s||!a){r.next=16;break}return r.abrupt("continue",0);case 16:return c&&c.controlbar&&c.controlbar.showControlBar(s),i&&i.controlbar&&i.controlbar.showControlBar(!s),r.next=20,Object(o.d)({type:l.a.UPDATE_STATE,payload:{isPlayerSmall:!s}});case 20:r.next=0;break;case 22:case"end":return r.stop()}},y)}t.default={init:v,dispose:S,switchWindow:h}},560:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),c=a(1),o=a(82),i=a.n(o),s=a(64),u=r.a.mark(l);function l(){var e,t,a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(c.f)([s.a.UPDATE_SEND_QA_MESSAGE]);case 3:return e=n.sent,t=e.payload,a=e.meta,n.next=8,Object(c.d)({type:s.a.UPDATE_STATE,payload:t});case 8:i()(a)&&a(),n.next=0;break;case 11:case"end":return n.stop()}},u)}t.default={updateQaMessages:l}},561:function(e,t,a){"use strict";a.r(t);var n=a(95),r=a.n(n),c=a(207),o=a.n(c),i=a(4),s=a.n(i),u=(a(84),a(15)),l=a(1),d=a(7),p=a(6),f=a(32),_=a(35),T=a(22),E=s.a.mark(P),m=s.a.mark(D),b=s.a.mark(j),y=s.a.mark(I),v=s.a.mark(U),S=s.a.mark(w),h=s.a.mark(C),O=s.a.mark(N),x=s.a.mark(L),A=s.a.mark(R),k=s.a.mark(q),g=s.a.mark(G);function P(){var e,t,a,n,r;return s.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(l.e)(function(e){return e.common});case 3:return e=c.sent,t=e.teachUnitId,c.next=7,Object(l.a)(f.a.post,_.a.POST_QUERYQUIZPAPERLIST,{teachUnitId:t});case 7:return a=c.sent,n=a.quizPapers,r=void 0===n?[]:n,c.next=12,Object(l.d)({type:d.a.UPDATE_PAPER_LIST,payload:{quizPapers:r}});case 12:return c.abrupt("return",!0);case 15:return c.prev=15,c.t0=c.catch(0),c.next=19,Object(l.a)(u.a.error,"获取随堂考列表失败");case 19:return c.next=21,Object(l.d)({type:p.a.SEND_SLOG,payload:{eid:"get_quiz_list_fail"}});case 21:return c.abrupt("return",!1);case 22:case"end":return c.stop()}},E,null,[[0,15]])}function D(){var e,t,a,n;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(l.f)(d.a.RECEIVE_QUIZ);case 3:return e=r.sent,t=e.payload.paperId,r.next=7,Object(l.e)(function(e){return e});case 7:if(a=r.sent,n=a.common.teachUnitId,a.quiz.visible||!n){r.next=24;break}return r.next=13,Object(l.d)({type:d.a.UPDATE_STATE,payload:{loading:!0,visible:!0}});case 13:return r.next=15,Object(l.a)(P);case 15:if(!r.sent){r.next=22;break}return r.next=18,Object(l.d)({type:d.a.UPDATE_STATE,payload:{currentPaperId:t,loading:!1}});case 18:return r.next=20,Object(l.d)({type:p.a.SEND_SLOG,payload:{eid:"show_examination_modal"}});case 20:r.next=24;break;case 22:return r.next=24,Object(l.d)({type:d.a.UPDATE_STATE,payload:{visible:!1,loading:!1}});case 24:r.next=0;break;case 26:case"end":return r.stop()}},m)}function j(){var e,t,a,n,r,c,o;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,Object(l.f)(d.a.FETCH_QUIZ_LIST);case 3:return i.next=5,Object(l.e)(function(e){return e});case 5:if(e=i.sent,t=e.common,a=t.isLive,!t.isKicked){i.next=11;break}return i.abrupt("continue",0);case 11:return i.next=13,Object(l.d)({type:d.a.UPDATE_STATE,payload:{loading:!0}});case 13:return i.next=15,Object(l.a)(P);case 15:if(!i.sent){i.next=25;break}return i.next=18,Object(l.e)(function(e){return e});case 18:return n=i.sent,r=n.quiz.uncompletedPapers,c=!1,o=d.a.TIPS.unstart,r.length&&a&&(c=!0,o=d.a.TIPS.uncomplete),i.next=25,Object(l.d)({type:d.a.UPDATE_STATE,payload:{popTip:o,popVisible:c}});case 25:return i.next=27,Object(l.d)({type:d.a.UPDATE_STATE,payload:{loading:!1}});case 27:i.next=0;break;case 29:case"end":return i.stop()}},b)}function I(e){var t,a,n,c,i,p,T,E;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(l.a)(f.a.get,_.a.GET_GETANALYSISANDSTUANSWER,{params:{recordId:e}});case 3:return t=s.sent,a=t.questionList,n=void 0===a?[]:a,c=o()(t,["questionList"]),console.log(n,c),i=n.reduce(function(e,t){var a=r()(e,2),n=a[0],c=a[1],o=t.questionId;return n[o]=t,c.push(o),[n,c]},[{},[]]),p=r()(i,2),T=p[0],E=p[1],s.next=9,Object(l.d)({type:d.a.UPDATE_STATE,payload:{questionIds:E,resultMap:T}});case 9:return s.abrupt("return",!0);case 12:return s.prev=12,s.t0=s.catch(0),u.a.error("获取考题解析失败"),s.abrupt("return",!1);case 16:case"end":return s.stop()}},y,null,[[0,12]])}function U(){var e,t,a;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(l.f)(d.a.CHECK_SCORE);case 3:return e=n.sent,t=e.payload.recordId,n.next=7,Object(l.d)({type:d.a.UPDATE_STATE,payload:{type:"score",scoreLoading:!0}});case 7:return n.prev=7,n.next=10,Object(l.a)(f.a.post,_.a.POST_QUERYHOMEWORKRESULT,{recordId:t});case 10:return a=n.sent,n.next=13,Object(l.d)({type:d.a.UPDATE_STATE,payload:{scoreRecord:a}});case 13:return n.next=15,Object(l.a)(I,t);case 15:n.next=23;break;case 17:return n.prev=17,n.t0=n.catch(7),n.next=21,Object(l.a)(u.a.error,"获取随堂考结果失败");case 21:return n.next=23,Object(l.d)({type:p.a.SEND_SLOG,payload:{eid:"query_homework_result_fail",opts:{recordid:t}}});case 23:return n.next=25,Object(l.d)({type:d.a.UPDATE_STATE,payload:{scoreLoading:!1}});case 25:n.next=0;break;case 27:case"end":return n.stop()}},v,null,[[7,17]])}function w(){var e,t;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(l.f)(d.a.PREV_QUESTION);case 3:return a.next=5,Object(l.e)(function(e){return e.quiz});case 5:if(e=a.sent,0!==(t=e.curIndex)){a.next=9;break}return a.abrupt("continue",0);case 9:return a.next=11,Object(l.d)({type:d.a.UPDATE_STATE,payload:{_time:Date.now(),curIndex:t-1}});case 11:a.next=0;break;case 13:case"end":return a.stop()}},S)}function C(){var e,t,a,n;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(l.f)(d.a.NEXT_QUESTION);case 3:return r.next=5,Object(l.e)(function(e){return e.quiz});case 5:if(e=r.sent,t=e.questionIds,a=e.curIndex,n=e.answerValueMap,a!==t.length-1){r.next=19;break}if(!(Object.keys(n).length<t.length)){r.next=15;break}return r.next=13,Object(l.d)({type:d.a.UPDATE_STATE,payload:{checkModal:!0,checkLoading:!1}});case 13:r.next=17;break;case 15:return r.next=17,Object(l.d)({type:d.a.SUBMIT_ANSWER});case 17:r.next=21;break;case 19:return r.next=21,Object(l.d)({type:d.a.UPDATE_STATE,payload:{curIndex:a+1}});case 21:r.next=0;break;case 23:case"end":return r.stop()}},h)}function N(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=s.a.mark(function e(){var t,a,n,c,o,i,p,T,E,m,b,y,v;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.f)(d.a.FETCH_CONTENT);case 2:return e.next=4,Object(l.e)(function(e){return e});case 4:return t=e.sent,a=t.common.teachUnitId,n=t.quiz,c=n.quizPapers,o=n.currentPaperId,e.next=11,Object(l.d)({type:d.a.UPDATE_STATE,payload:{checkModal:!1,type:"",loading:!0}});case 11:return e.prev=11,e.next=14,Object(l.a)(f.a.post,_.a.POST_QUERYPAPERCONTENT,{teachUnitId:a,paperId:o});case 14:return i=e.sent,p=i.questionList,T=void 0===p?[]:p,E=i.recordId,c.find(function(e){return e.paperId===o}).recordId=E,m=T.reduce(function(e,t){var a=r()(e,2),n=a[0],c=a[1],o=t.questionId;return n[o]=t,c.push(o),[n,c]},[{},[]]),b=r()(m,2),y=b[0],v=b[1],e.next=21,Object(l.d)({type:d.a.UPDATE_STATE,payload:{questionIds:v,resultMap:y,type:"content",loading:!1,_time:Date.now(),quizPapers:c.slice()}});case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(11),e.next=27,Object(l.a)(u.a.error,"获取考题内容失败");case 27:case"end":return e.stop()}},e,null,[[11,23]])});case 1:return t.delegateYield(e(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},O)}function L(){var e,t,a,n,r,c;return s.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(l.f)(d.a.GO_TO_PAPER);case 3:return e=o.sent,t=e.payload.paper,a=t.paperId,n=t.recordId,r=t.quizzesPaperStatusCode,c=["COMPLETE","MARKING"].includes(r),o.next=11,Object(l.d)({type:d.a.UPDATE_STATE,payload:{currentPaperId:a,curIndex:0,_time:Date.now()}});case 11:if(!c){o.next=16;break}return o.next=14,Object(l.d)({type:d.a.CHECK_SCORE,payload:{recordId:n}});case 14:o.next=18;break;case 16:return o.next=18,Object(l.d)({type:d.a.FETCH_CONTENT});case 18:o.next=0;break;case 20:case"end":return o.stop()}},x)}function R(){var e,t,a,n,r,c,o,i,u,p,f,_,T,E;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,Object(l.f)(d.a.DO_ANSWER);case 3:return e=s.sent,t=e.payload.answer,s.next=7,Object(l.e)(function(e){return e.quiz});case 7:if(a=s.sent,n=a.answerMap,r=a._time,c=a.curIndex,o=a.questionIds,i=a.answerValueMap,u=a.resultMap,!(p=o[c])){s.next=24;break}return i[p]=t,f=n[p],_=void 0===f?0:f,T=Date.now(),_+=Math.ceil((T-r)/1e3),n[p]=_,s.next=23,Object(l.d)({type:d.a.UPDATE_STATE,payload:{answerValueMap:i,_time:T}});case 23:console.log("答题时间".concat(p,"[").concat(t,"]: ").concat(_));case 24:if(E=u[p],"JUDGE_CHOICE"!==(E=void 0===E?{}:E).questionType||c===o.length-1){s.next=30;break}return s.next=30,Object(l.d)({type:d.a.NEXT_QUESTION});case 30:s.next=0;break;case 32:case"end":return s.stop()}},A)}function q(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=s.a.mark(function e(){var t,a,n,r,c,o,i,T,E,m,b;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.f)(d.a.SUBMIT_ANSWER);case 2:return e.next=4,Object(l.d)({type:d.a.UPDATE_STATE,payload:{checkLoading:!0}});case 4:return e.next=6,Object(l.e)(function(e){return e});case 6:return t=e.sent,a=t.quiz,n=a.resultMap,r=a.answerMap,c=a.quizPapers,o=a.questionIds,i=a.answerValueMap,T=a.currentPaperId,E=c.find(function(e){return e.paperId===T}),m=E.recordId,b=o.map(function(e){var t=n[e],a=(t=void 0===t?{}:t).sequence,c=t.questionType,o=i[e],s=void 0===o?"":o,u=r[e];return{questionId:e,sequence:a,questionType:c,answer:s,answerTime:s?u:0}}),e.prev=16,e.next=19,Object(l.a)(f.a.post,_.a.POST_SUBMITHOMEWORK,{recordId:m,answerList:JSON.stringify(b)});case 19:return e.next=21,Object(l.d)({type:d.a.CHECK_SCORE,payload:{recordId:m}});case 21:return e.next=23,Object(l.d)({type:d.a.UPDATE_STATE,payload:{checkModal:!1}});case 23:return e.next=25,Object(l.a)(P);case 25:return e.next=27,Object(l.d)({type:p.a.SEND_SLOG,payload:{eid:"submit_examination_success",opts:{recordId:m}}});case 27:e.next=34;break;case 29:return e.prev=29,e.t0=e.catch(16),u.a.error("交卷失败"),e.next=34,Object(l.d)({type:p.a.SEND_SLOG,payload:{eid:"submit_examination_failure",opts:{recordId:m}}});case 34:return e.next=36,Object(l.d)({type:d.a.UPDATE_STATE,payload:{checkLoading:!1}});case 36:case"end":return e.stop()}},e,null,[[16,29]])});case 1:return t.delegateYield(e(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},k)}function G(){var e,t,a,n,r,c;return s.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(l.f)(d.a.START_BTN_CLICKED);case 3:return o.next=5,Object(l.e)(function(e){return e});case 5:if(e=o.sent,t=e.quiz,a=t.popVisible,n=t.quizPapers,r=e.common.isKicked,n.length&&!r){o.next=19;break}return o.next=13,Object(l.d)({type:d.a.UPDATE_STATE,payload:{popVisible:!0,popTip:d.a.TIPS.unstart}});case 13:return o.next=15,Object(l.a)(T.c,3e3);case 15:return o.next=17,Object(l.d)({type:d.a.UPDATE_STATE,payload:{popVisible:!1}});case 17:o.next=23;break;case 19:return c={visible:!0},a&&(c.popVisible=!1),o.next=23,Object(l.d)({type:d.a.UPDATE_STATE,payload:c});case 23:o.next=0;break;case 25:case"end":return o.stop()}},g)}t.default={prevQuestion:w,nextQuestion:C,fetchContent:N,startBtnClicked:G,receiveQuiz:D,fetchQuizListSaga:j,checkScore:U,goToPaper:L,doAnswer:R,submitQuestion:q}},563:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),c=(a(84),a(15)),o=a(1),i=a(149),s=a(22),u=a(25),l=a(6),d=r.a.mark(_),p=r.a.mark(T),f=r.a.mark(E);function _(e){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=r.a.mark(function t(){var a,n,d,p,f,_,T,E,m,b,y;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.f)(u.a.INIT);case 2:return a=t.sent,n=a.payload,d=n.boardRef,p=n.playerRef,f=n.vodChat,t.next=9,Object(o.e)(function(e){return e});case 9:if(_=t.sent,T=_.common,E=T.token,m=T.debug,!E){t.next=30;break}return b={liveToken:E,sketchpad:{el:d,ready:function(t){e.dispatch({type:u.a.UPDATE_STATE,payload:{sketchpad:t}})}},camera:{el:p,onFullScreen:function(){e.dispatch({type:u.a.UPDATE_STATE,payload:{isFullScreen:!0}});var t=document.getElementById("app"),a=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;return a&&a.call(t),Object(s.a)(t,"fullscreen"),e.dispatch({type:l.a.SEND_SLOG,payload:{eid:"replay_click_fullscreen"}}),!0},onExitFullScreen:function(){e.dispatch({type:u.a.UPDATE_STATE,payload:{isFullScreen:!1}});var t=document.getElementById("app"),a=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,n=document.exitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;return a&&n&&n.call(document),Object(s.e)(t,"fullscreen"),e.dispatch({type:u.a.UPDATE_STATE,payload:{isDisPlaySmall:!0}}),e.dispatch({type:l.a.SEND_SLOG,payload:{eid:"replay_click_quitfullscreen"}}),!0},ready:function(t){e.dispatch({type:u.a.UPDATE_STATE,payload:{camera:t}})}},chat:{ready:function(t){e.dispatch({type:u.a.UPDATE_STATE,payload:{chat:t}})}},debug:m},y=new i.Replay(b),t.next=18,Object(o.d)({type:u.a.UPDATE_STATE,payload:{replayRoom:y}});case 18:y.on("replay:login",function(t){var a=t.roomInfo,n=(a=void 0===a?{}:a).sName,r=t.iUserId;e.dispatch({type:l.a.UPDATE_STATE,payload:{userId:r}}),document.title=n,e.dispatch({type:l.a.SEND_SLOG,payload:{eid:"replay_enter_page"}}),e.dispatch({type:l.a.SEND_SLOG,payload:{eid:"user_info",opts:{courseType:"video",client:"pc-web"}}})}),y.on("replay: video_type_change",function(t){e.dispatch({type:u.a.SWITCH_WINDOW,payload:{type:t}})}),y.on("replay:error",function(e){var t=e.iCode;40002===t?c.a.error("您的登录已过期，请重新进入课程。"):c.a.error("点播登录错误，错误码".concat(t))}),y.on("camera:volume_change",Object(s.b)(function(){var t=e.getState()["vod-page"].isFullScreen?"replay_click_sound_fs":"replay_click_sound";e.dispatch({type:l.a.SEND_SLOG,payload:{eid:t}})},2e3)),y.on("camera:rate_change",function(t){var a=e.getState()["vod-page"].isFullScreen,n=u.a.PLAY_BACK_RATE[t],r=a?"_fs":"";e.dispatch({type:l.a.SEND_SLOG,payload:{eid:"".concat(n).concat(r)}})}),y.on("camera:time_update",Object(s.f)(function(){e.dispatch({type:l.a.SEND_SLOG,payload:{eid:"replay_keep_watch"}})},6e4)),y.on("camera:time_update",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).timestamp;f&&f.handleMetaDataUpdate(e)}),y.on("camera:seeked",function(e){var t=e.timestamp;f&&f.handleVideoSeeked(t)}),y.on("camera:switch_button_click",function(t){var a=e.getState()["vod-page"].isFullScreen;e.dispatch({type:u.a.UPDATE_STATE,payload:{isDisPlaySmall:t}}),a&&e.dispatch({type:l.a.SEND_SLOG,payload:{eid:t?"replay_open_smallwindow_fs":"replay_close_smallwindow_fs"}})}),y.on("camera:playback_rate_button_click",function(){e.dispatch({type:l.a.SEND_SLOG,payload:{eid:"replay_click_speed"}})}),t.next=31;break;case 30:c.a.error("缺少token，无法初始化点播。");case 31:case"end":return t.stop()}},t)});case 1:return a.delegateYield(t(),"t0",3);case 3:a.next=1;break;case 5:case"end":return a.stop()}},d)}function T(){var e,t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(o.f)(u.a.DISPOSE);case 3:return a.next=5,Object(o.e)(function(e){return e["vod-page"]});case 5:return e=a.sent,(t=e.replayRoom)&&t.dispose(),a.next=10,Object(o.d)({type:u.a.UPDATE_STATE,payload:{replayRoom:null}});case 10:return a.next=12,Object(o.d)({type:l.a.SEND_SLOG,payload:{eid:"replay_quit_page"}});case 12:a.next=0;break;case 14:case"end":return a.stop()}},p)}function E(){var e,t,a,n,c,i,s;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(o.f)(u.a.SWITCH_WINDOW);case 3:return e=r.sent,t=e.payload,a=(t=void 0===t?{}:t).type,r.next=9,Object(o.e)(function(e){return e["vod-page"]});case 9:if(n=r.sent,c=n.camera,i=n.sketchpad,s=n.isPlayerSmall,1===a!==s||!a){r.next=16;break}return r.abrupt("continue",0);case 16:return c&&c.controlbar&&c.controlbar.showControlBar(s),i&&i.controlbar&&i.controlbar.showControlBar(!s),r.next=20,Object(o.d)({type:u.a.UPDATE_STATE,payload:{isPlayerSmall:!s}});case 20:r.next=0;break;case 22:case"end":return r.stop()}},f)}t.default={init:_,dispose:T,switchWindow:E}},580:function(e,t,a){},581:function(e,t,a){"use strict";a.r(t);var n,r,c,o=a(11),i=a.n(o),s=(a(320),a(322),a(323),a(325),a(326),a(328),a(329),a(166),a(332),a(333),a(335),a(336),a(337),a(339),a(340),a(341),a(342),a(343),a(344),a(345),a(346),a(347),a(348),a(349),a(351),a(352),a(353),a(354),a(355),a(356),a(357),a(358),a(359),a(360),a(361),a(362),a(363),a(364),a(365),a(366),a(367),a(368),a(370),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(396),a(397),a(398),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(408),a(409),a(410),a(411),a(236),a(412),a(414),a(415),a(416),a(417),a(418),a(419),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(432),a(433),a(434),a(435),a(436),a(437),a(438),a(439),a(440),a(441),a(442),a(443),a(444),a(445),a(446),a(447),a(448),a(449),a(450),a(451),a(452),a(453),a(454),a(455),a(456),a(457),a(458),a(459),a(460),a(461),a(244),a(0)),u=a.n(s),l=a(17),d=a.n(l),p=a(69),f=a(34),_=a(293),T=a(276),E=a(150),m=a(151),b=(a(472),a(71)),y=a(196),v=a(197),S=(a(302),a(212)),h=a(52),O=a.n(h),x=a(53),A=a.n(x),k=a(54),g=a.n(k),P=a(55),D=a.n(P),j=a(56),I=a.n(j),U=a(2),w=a.n(U),C=a(6),N=a(285),L=a.n(N),R=Object(f.c)(function(e){return{loading:e.common.loading}})((c=r=function(e){function t(e){var a;return O()(this,t),a=g()(this,D()(t).call(this,e)),e.dispatch({type:C.a.AUTH}),a}return I()(t,e),A()(t,[{key:"render",value:function(){var e=this.props,a=e.loading,n=e.route.routes;return a?t.loadingElement:u.a.createElement(s.Suspense,{fallback:t.loadingElement},Object(m.a)(n))}}]),t}(s.Component),r.propTypes={loading:w.a.bool.isRequired},r.loadingElement=u.a.createElement(S.a,{tip:"加载中...",wrapperClassName:L.a.main},u.a.createElement("div",null)),n=c))||n,q=a(289),G=a.n(q),M=a(21),W=a(4),F=a.n(W),V=a(125),H=a.n(V),z=a(81),K=a.n(z),B=(a(294),a(155)),Q=a(49),Y={0:"服务器返回正确",1:"数据库错误",2:"入参错误",3:"直播间不存在",4:"json解析错误",5:"直播间不存在改成员",6:"直播间禁言",7:"敏感词屏蔽",8:"非注册用户",9:"用户无操作权限",10:"直播间满员"},Z=a(203),J=a.n(Z);var X=[],$=document.createElement("div"),ee=function(){var e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",MSTransitionEnd:"MSTransitionEnd"};for(var a in t)if(void 0!==e.style[a])return t[a];return"transitionend"}();function te(e){return new Promise(function(t){var a=document.createElement("div"),n=$.clientWidth;a.className=J.a.box,a.style.left="".concat(n,"px"),a.innerText="广播：".concat(e.msgData),a.addEventListener(ee,function(e){$.removeChild(a),t()}),$.appendChild(a);var r=a.clientWidth;a.style.left="-".concat(r,"px")})}$.className=J.a.wrap,document.body.appendChild($);var ae={add:function(e){X.push(e),this._show()},_isScrolling:!1,_show:function(){var e=H()(F.a.mark(function e(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isScrolling){e.next=2;break}return e.abrupt("return");case 2:this._isScrolling=!0;case 3:if(!X.length){e.next=9;break}return e.next=6,te(X[0]);case 6:X.splice(0,1),e.next=3;break;case 9:this._isScrolling=!1;case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},ne=a(22),re=a(27),ce=a(64),oe=Object(s.lazy)(function(){return Promise.all([a.e(1),a.e(2)]).then(a.bind(null,795))}),ie=0,se=2,ue=function(e){function t(e){var a;return O()(this,t),(a=g()(this,D()(t).call(this,e))).componentWillUnmount=function(){var e=a.props.chat;e&&e.dispose()},a.onSelectEmotion=function(){return a.sendSlog("live_click_look")},a.getSLEmoji=function(){return a.props.chat?a.props.chat.getSLEmoji():{}},a.setMessage=Object(ne.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;a.props.dispatch({type:re.a.UPDATE_CHAT_MESSAGE,payload:{chatData:e.slice()},meta:t})},200),a.initChat=function(){var e=a.props.liveRoom;e.on("live:kicked",a.handleKicked),e.on("chat:login",a.handleLoginReply),e.on("chat:initial_room_announce",a.updateAnnounce),e.on("chat:room_announce_update",a.updateAnnounce),e.on("chat:send_message_status",a.handleMessageReply),e.on("chat:receive_message",a.handleMessageRecv),e.on("chat:user_notification",a.handleUserNotify),e.on("chat:room_speaking_status",a.handleSpeakingChanged),e.on("chat:room_dismiss",a.handleRoomDismissed),e.on("chat:user_kicked_for_new_login",a.handleUserKicked),e.on("chat:bulk_exit_notification",a.handleBulkExitNotify),e.on("chat:user_speaking_status",a.handleUserForbiddenStatus),e.on("chat:websocket_error",a.handleWebsocketError)},a.updateAnnounce=function(e){var t=e.data;a.props.dispatch({type:re.a.UPDATE_STATE,payload:{announceData:t}})},a.handleWebsocketError=function(e){a.props.dispatch({type:re.a.UPDATE_STATE,payload:{connectStatus:0}}),a.props.dispatch({type:ce.a.UPDATE_STATE,payload:{connectStatus:0}})},a.handleKicked=function(){var e=a.props,t=e.dispatch;e.history.replace("/wait"),t({type:C.a.KICK_OUT}),t({type:C.a.SEND_SLOG,payload:{eid:"userkicked"}})},a.handleBulkExitNotify=function(e){},a.handleUserForbiddenStatus=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,t=(e=void 0===e?{}:e).status;a.props.dispatch({type:re.a.UPDATE_STATE,payload:{forbiddenStatusSingle:t}}),a.props.dispatch({type:ce.a.UPDATE_STATE,payload:{forbiddenStatusSingle:t}})},a.handleUserKicked=function(e){B.a.error({title:"你已经在其他地方登陆"})},a.handleRoomDismissed=function(e){a.chat&&a.chat.dispose()},a.handleSpeakingChanged=function(e){var t=e.data.status;a.props.dispatch({type:re.a.UPDATE_STATE,payload:{forbiddenStatus:t}}),a.props.dispatch({type:ce.a.UPDATE_STATE,payload:{forbiddenStatus:t}})},a.handleUserNotify=function(e){},a.handleLoginReply=function(e){var t=e.data,n=e.result,r=0!==n;r&&B.a.error({title:"聊天登录失败，原因: ".concat(Y[n])});var c=t.forbiddenStatus,o=t.forbiddenStatusSingle,i=t.messageData,s=void 0===i?[]:i,u=t.userIdentity,l=t.userToken,d=t.portrait,p=1,f=t.qaData;!K()(f)&&f||(f=[[]]),r&&(p=0);var _=s.reduce(function(e,t){return t.msgType===se?ae.add(t):e.push(t),e},[]);a.messageList=_,a.props.dispatch({type:re.a.LOADING_REPLY,payload:{forbiddenStatusSingle:o,forbiddenStatus:c,connectStatus:p,userIdentity:u,userToken:l,chatData:_,portrait:d},meta:function(){var e=H()(F.a.mark(function e(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return a.handleSendText(null,Y[n]),e.abrupt("return");case 3:if(!_.length){e.next=7;break}return e.next=6,Object(ne.c)(20);case 6:a.chatPanel&&a.chatPanel.updateChatScroll(!0,0,!0);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),a.props.dispatch({type:ce.a.UPDATE_SEND_QA_MESSAGE,payload:{qaData:f[0],forbiddenStatusSingle:o,forbiddenStatus:c,connectStatus:p,userIdentity:u,userToken:l,portrait:d}})},a.handleMessageReply=function(e){0!==e.result&&a.sendSlog("send_im_failure")},a.handleMessageRecv=function(e){var t=e.data,n=t.name,r=t.portrait,c=t.msgData,o=t.msgType,i={name:n,msgData:c,msgType:o,portrait:r,recordId:t.recordId,createTime:t.createTime,userIdentity:t.userIdentity};o===se?ae.add(i):(a.messageList.push(i),a.setMessage(a.messageList,function(){a.chatPanel&&a.chatPanel.updateChatScroll()}))},a.handleSendText=function(e,t){var n=a.props.data,r=n.forbiddenStatusSingle,c=n.forbiddenStatus,o=n.connectStatus,i=n.userIdentity,s=n.userToken,u={portrait:n.portrait,name:"我",recordId:"self_msg_".concat(ie+=1),userIdentity:i,msgData:e,fromUserToken:s};if(0===o)u={name:"[提示]",msgData:t||"服务连接中，请稍候重试...",recordId:"self_msg_".concat(ie),isError:!0};else{if(0!==c||0!==r)return;a.props.chat.sendMessage(e),a.props.dispatch({type:re.a.START_COUNTDOWN})}a.messageList.push(u),a.props.dispatch({type:re.a.UPDATE_CHAT_MESSAGE,payload:{chatData:a.messageList.slice()},meta:function(){var e=H()(F.a.mark(function e(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.c)(10);case 2:a.chatPanel&&a.chatPanel.updateChatScroll();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),a.sendSlog("live_click_send")},a.messageList=[],a.initChat(),a}return I()(t,e),A()(t,[{key:"sendSlog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.props.dispatch({type:C.a.SEND_SLOG,payload:{eid:e,opts:t}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.chat,n=t.data,r=n.chatData,c=n.userToken,o=n.iUserCount,i=n.announceData,s=n.connectStatus,l=n.countdownNumber,d=n.forbiddenStatus,p=n.forbiddenStatusSingle,f=1;return 0===s?f=0:(1===p&&(f=2),1===d&&(f=3)),!!a&&u.a.createElement(oe,{ref:function(t){e.chatPanel=t},emoji:this.getSLEmoji(),onSend:this.handleSendText,iUserCount:o,chatData:r,announceData:i,status:f,sendSlog:this.sendSlog,onSelectEmotion:this.onSelectEmotion,userToken:c,countdownNumber:l})}}]),t}(s.Component);ue.propTypes={liveRoom:w.a.object.isRequired,chat:w.a.object,data:w.a.object.isRequired},ue.defaultProps={chat:null};var le=Object(Q.e)(Object(f.c)(function(e){return{data:e.chat}})(ue)),de=a(148),pe=a(72),fe=a.n(pe),_e=G.a.bind(fe.a),Te=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=g()(this,(e=D()(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.dispatch({type:M.a.INIT,payload:{boardRef:a.boardRef,playerRef:a.playerRef}})},a.componentWillUnmount=function(){a.props.dispatch({type:M.a.DISPOSE})},a}return I()(t,e),A()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.common.userId,n=t.data,r=n.isPlayerSmall,c=n.liveRoom,o=n.chat,i=n.isDisPlaySmall;return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:fe.a.left},u.a.createElement("div",{className:fe.a.sunl_player_placeholder}),u.a.createElement("div",{className:fe.a.coming_soon})),u.a.createElement("div",{className:fe.a.main},u.a.createElement("div",{className:fe.a.sunl_board_placeholder}),u.a.createElement("div",{className:fe.a.btns},u.a.createElement(de.a,null))),u.a.createElement("div",{className:fe.a.right},u.a.createElement(s.Suspense,{fallback:null},!!o&&!!c&&u.a.createElement(le,{chat:o,liveRoom:c,userId:a}))),u.a.createElement("div",{id:"sunl_player",className:_e({transition:!0,main_player:!r,small_player:r,inactive:r&&!i}),ref:function(t){e.playerRef=t}}),u.a.createElement("div",{id:"sunl_board",className:_e({transition:!0,main_player:r,small_player:!r,inactive:!r&&!i}),ref:function(t){e.boardRef=t}}))}}]),t}(s.Component);Te.propTypes={common:w.a.shape({token:w.a.string,teachUnitId:w.a.number,ctk:w.a.string}),data:w.a.object.isRequired},Te.defaultProps={common:{token:"",teachUnitId:0,ctk:""}};var Ee=Object(f.c)(function(e){return{common:e.common,data:e["live-page"]}})(Te),me=a(9),be=a.n(me),ye=a(16),ve=a.n(ye),Se=a(25),he=a(38),Oe=a.n(he),xe=Object(s.lazy)(function(){return Promise.all([a.e(1),a.e(2),a.e(13)]).then(a.bind(null,799))}),Ae=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=g()(this,(e=D()(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.dispatch({type:Se.a.INIT,payload:{boardRef:a.boardRef,playerRef:a.playerRef,vodChat:a.vodChat}})},a.componentWillUnmount=function(){a.props.dispatch({type:Se.a.DISPOSE})},a}return I()(t,e),A()(t,[{key:"render",value:function(){var e,t,a=this,n=this.props.data,r=n.chat,c=n.isPlayerSmall,o=n.isDisPlaySmall;return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:Oe.a.left},u.a.createElement("div",{className:Oe.a.sunl_player_placeholder}),u.a.createElement("div",{className:Oe.a.questions})),u.a.createElement("div",{className:Oe.a.main},u.a.createElement("div",{className:Oe.a.sunl_board_placeholder}),u.a.createElement("div",{className:Oe.a.btns},u.a.createElement(de.a,null))),u.a.createElement("div",{className:Oe.a.right},u.a.createElement(s.Suspense,{fallback:null},!!r&&u.a.createElement(xe,{ref:function(e){a.vodChat=e},chat:r}))),u.a.createElement("div",{id:"sunl_player",className:ve()((e={},be()(e,Oe.a.transition,!0),be()(e,Oe.a.main_player,!c),be()(e,Oe.a.small_player,c),be()(e,Oe.a.inactive,c&&!o),e)),ref:function(e){a.playerRef=e}}),u.a.createElement("div",{id:"sunl_board",className:ve()((t={},be()(t,Oe.a.transition,!0),be()(t,Oe.a.main_player,c),be()(t,Oe.a.small_player,!c),be()(t,Oe.a.inactive,!c&&!o),t)),ref:function(e){a.boardRef=e}}))}}]),t}(s.Component);Ae.propTypes={common:w.a.shape({token:w.a.string,teachUnitId:w.a.number}),data:w.a.object},Ae.defaultProps={common:{token:"",teachUnitId:0},data:{}};var ke=[{path:"/",component:R,routes:[{path:"/live",component:Ee},{path:"/vod",component:Object(f.c)(function(e){return{common:e.common,data:e["vod-page"]}})(Ae)},{path:"/wait",component:Object(s.lazy)(function(){return a.e(12).then(a.bind(null,797))})}]},{component:function(){return"404 NOT FOUND"}}],ge=(a(580),Object(b.a)()),Pe=Object(_.a)(),De=[Pe];De.push(Object(T.a)(ge));var je=Object(p.e)(Object(p.c)(i()({},y.default,{router:Object(E.b)(ge)})),{},Object(p.d)(p.a.apply(void 0,De)));Pe.run(v.default,je);var Ie=document.getElementById("app");d.a.render(u.a.createElement(f.a,{store:je},u.a.createElement(E.a,{history:ge},Object(m.a)(ke))),Ie)},582:function(e,t,a){"use strict";a.r(t);a(84);var n=a(15),r=a(4),c=a.n(r),o=a(11),i=a.n(o),s=a(1),u=a(37),l=a(82),d=a.n(l),p=a(6),f=a(21),_=a(25),T=a(32),E=a(22),m=a(35),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sunlands";return{LIVE_AUTH_ENTRY:"https://".concat(e,"live.").concat(t,".com/auth"),VOD_AUTH_ENTRY:"https://".concat(e,"video.").concat(t,".com/auth")}},y={URL:{dev:b("dev-","ministudy"),test:b("test-"),prod:b()}.prod},v=c.a.mark(k),S=c.a.mark(g),h=c.a.mark(P),O=y.URL,x=O.LIVE_AUTH_ENTRY,A=O.VOD_AUTH_ENTRY;function k(){var e,t,a,n,r,o,u,l,f,_,T,E;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=3,Object(s.f)(p.a.SEND_SLOG);case 3:return e=c.sent,t=e.payload,a=t.eid,n=t.opts,r=void 0===n?{}:n,c.next=10,Object(s.e)(function(e){return e});case 10:o=c.sent,u=o.common,l=u.teachUnitId,f=u.liveRoomId,_=u.invitation,T=u.userId,(E=window.slog)&&d()(E.dot)&&E.dot(a,i()({},r,{userid:T||"",teachunitid:l||"",roomid:f||"",invitation:_||""})),c.next=0;break;case 20:case"end":return c.stop()}},v)}function g(){var e,t,a,r,o,l,d,f,_,b,y,v,h,O,k,g,P,D,j,I,U,w,C,N,L,R;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(s.f)(p.a.AUTH);case 2:return c.next=4,Object(s.e)(function(e){return e.router.location});case 4:return e=c.sent,t=e.pathname,a=void 0===t?"":t,r=e.search,o=void 0===r?"":r,l=Object(E.d)(o),d=l.ctk,f=l.invitation,_=l.encryptStr,b=l.teachUnitId,y=l.channelCode,v=l.debug,c.next=12,Object(s.d)({type:p.a.UPDATE_STATE,payload:{debug:"true"===v}});case 12:if("/wait"!==a){c.next=16;break}return c.next=15,Object(s.d)({type:p.a.UPDATE_STATE,payload:{isKicked:!0,loading:!1}});case 15:return c.abrupt("return");case 16:return h="/live"===a,c.next=19,Object(s.d)({type:p.a.UPDATE_STATE,payload:{ctk:d,isLive:h,invitation:f,encryptStr:_,channelCode:y,teachUnitId:+b}});case 19:if(!b||!_){c.next=40;break}return O={sign:_,teachUnitId:+b},c.prev=21,c.next=24,Object(s.a)(T.a.get,m.a.GET_TOKEN,{params:O});case 24:return k=c.sent,c.next=27,Object(s.d)({type:p.a.UPDATE_STATE,payload:k});case 27:c.next=40;break;case 29:if(c.prev=29,c.t0=c.catch(21),!(c.t0.toString().indexOf("被踢出人员")>-1)){c.next=39;break}return c.next=34,Object(s.d)({type:p.a.UPDATE_STATE,payload:{isKicked:!0}});case 34:return c.next=36,Object(s.d)(Object(u.d)("/wait"));case 36:return c.next=38,Object(s.d)({type:p.a.UPDATE_STATE,payload:{loading:!1}});case 38:return c.abrupt("return");case 39:n.a.error("课程认证失败，".concat(c.t0));case 40:return c.next=42,Object(s.e)(function(e){return e.common});case 42:if(g=c.sent,P=g.liveToken,D=g.liveRoomId,j=g.imToken,I=a.replace(/\//g,"").toUpperCase(),U="",C={},"LIVE"===I?(U="live",w=x):"VOD"===I&&(U="video",w=A),U){c.next=53;break}return n.a.error("页面参数错误，请检查地址后再来。"),c.abrupt("return");case 53:return N={loginType:U,device:3},f&&d?C=i()({method:3,token:d,invitation:f,channelCode:y},N):P&&D?C=i()({method:2,channelCode:"sunlands_infrastructure_Elive",liveId:+D||0,token:P},N):f&&(C=i()({method:1,invitation:f},N)),L={},c.prev=56,c.next=59,Object(s.a)(T.a,{method:"POST",url:w,data:C,withCredentials:!1,headers:{"Content-Type":"application/json;charset=utf-8"}});case 59:return L=c.sent,R=L.token,c.next=63,Object(s.d)({type:p.a.UPDATE_STATE,payload:{token:R,loading:!1,ctk:d||j}});case 63:c.next=70;break;case 65:return c.prev=65,c.t1=c.catch(56),n.a.error("课程认证失败，错误码".concat(c.t1)),c.next=70,Object(s.d)({type:p.a.UPDATE_STATE,payload:{loading:!1}});case 70:case"end":return c.stop()}},S,null,[[21,29],[56,65]])}function P(){var e,t,a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(s.f)(p.a.SWITCH_WINDOW);case 3:return n.next=5,Object(s.e)(function(e){return e.common});case 5:return e=n.sent,t=e.isLive,a=void 0,a=t?f.a.SWITCH_WINDOW:_.a.SWITCH_WINDOW,n.next=11,Object(s.d)({type:a});case 11:n.next=0;break;case 13:case"end":return n.stop()}},h)}t.default={auth:g,sendSlog:k,switchWindow:P}},6:function(e,t,a){"use strict";t.a={UPDATE_STATE:"common/update-state",KICK_OUT:"common/kick-out",AUTH:"common/AUTH",SEND_SLOG:"common/SEND_SLOG",SWITCH_WINDOW:"common/SWITCH_WINDOW"}},63:function(e,t,a){"use strict";t.a={UPDATE_STATE:"course/UPDATE_STATE",FETCH_LIST:"course/FETCH_LIST",BTN_CLICKED:"course/BTN_CLICKED"}},64:function(e,t,a){"use strict";t.a={UPDATE_STATE:"question/UPDATE_STATE",UPDATE_SEND_QA_MESSAGE:"question/UPDATE_SEND_QA_MESSAGE"}},7:function(e,t,a){"use strict";t.a={UPDATE_STATE:"quiz/update-state",RECEIVE_QUIZ:"quiz/receive-quiz",FETCH_QUIZ_LIST:"quiz/fetch-quiz-list",SET_CURRENT_QUESTION:"quiz/SET_CURRENT_QUESTION",UPDATE_PAPER_LIST:"quiz/UPDATE_PAPER_LIST",TIPS:{unstart:"暂无随堂考！",uncomplete:"您还有未做随堂考！"},START_BTN_CLICKED:"quiz/start-btn-clicked",CHECK_SCORE:"quiz/CHECK_SCORE",PREV_QUESTION:"quiz/PREV_QUESTION",NEXT_QUESTION:"quiz/NEXT_QUESTION",FETCH_CONTENT:"quiz/FETCH_CONTENT",GO_TO_PAPER:"quiz/GO_TO_PAPER",DO_ANSWER:"quiz/DO_ANSWER",SUBMIT_ANSWER:"quiz/SUBMIT_ANSWER"}},72:function(e,t,a){e.exports={main:"LivePage__main___3jIMV",left:"LivePage__left___wGwGs",right:"LivePage__right___1-yWK",transition:"LivePage__transition___1PE0Z",sunl_board_placeholder:"LivePage__sunl_board_placeholder___3N8JI",sunl_player_placeholder:"LivePage__sunl_player_placeholder___kA34P",main_player:"LivePage__main_player___3zslR",small_player:"LivePage__small_player___37TJX",chat:"LivePage__chat___2b-2i",inactive:"LivePage__inactive___3SySF",btns:"LivePage__btns___3T-0Z",questions:"LivePage__questions___2m2EN",coming_soon:"LivePage__coming_soon___ylIFw"}}});
//# sourceMappingURL=index.75f1b1632f945edceaf1.js.map